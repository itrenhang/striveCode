<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="奋斗网 - itstrive.com" />
<meta name="copyright" content="奋斗网 - itstrive.com" />
<title>奋斗网— http://www.itstrive.com</title>
<style>
</style>
<script src="jquery-1.7.2.js"></script>
<script>
//$.ajax()  返回的是一个deferred 对象
//$.when（必须放一个deferred对象）
var derfer=$.Deferred(); //新建一个Derferred对象
function wait(){
	setTimeout(function(){
		alert('执行完毕');
		derfer.resolve();  //改变Derferred状态
	},5000);
	
	return derfer;	
}
$(function(){
	
	$('#btn1').click(function(){
		$.when(wait()).done(function(){ //这样是不行的 when() 里面必须放一个deferred对象
			alert('ok');	
		}).fail(function(){
			alert('!ok');	
		});
	});	
});
</script>
</head>

<body>
<input type="button" value="按钮" id="btn1">
</body>
</html>
